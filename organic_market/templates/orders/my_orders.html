{% extends 'customer/customer_base.html' %}
{% block content %}

<div class="container mt-4">
  <h3 class="fw-bold mb-4">ðŸ“¦ My Orders</h3>

  {% if orders %}
  <table class="table table-bordered">
    <thead class="table-light">
      <tr>
        <th>Order ID</th>
        <th>Date</th>
        <th>Total</th>
        <th>Status</th>
        <th>Track</th>
      </tr>
    </thead>
    <tbody>
      {% for order in orders %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ order.created_at|date:"d M Y" }}</td>
        <td>â‚¹{{ order.total_amount }}</td>
        <td>
          {% if order.status == 'CANCELLED' %}
            <span class="badge bg-danger">Cancel</span>
          {% elif order.status == 'RETURNED' %}
            <span class="badge bg-secondary">Return</span>
          {% else %}
            <span class="badge bg-info">{{ order.status }}</span>
          {% endif %}
        </td>
        <td>
          <a href="{% url 'orders:track_order' order.id %}" class="btn btn-outline-success btn-sm">
            Track
          </a>
          {% if order.status == 'DELIVERED' %}
            <a href="{% url 'orders:return_order' order.id %}" class="btn btn-outline-primary btn-sm ms-1">
              Return
            </a>
          {% elif order.status != 'CANCELLED' and order.status != 'RETURNED' %}
            <a href="{% url 'orders:cancel_order' order.id %}" class="btn btn-outline-danger btn-sm ms-1">
              Cancel
            </a>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p class="text-muted">No orders placed yet.</p>
  {% endif %}
</div>

{% endblock %}
